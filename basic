#!/usr/bin/nodejs

var ScaleGenerator = require( 'scale-generator' );

var THE_TEXT = 
`
\\paper  {
    #(set! paper-alist (cons '("a4insides" . (cons (* 5 in) (* 3 in))) paper-alist))
    #(set-paper-size "a4insides")
}
`;

ScaleGenerator.prototype.writeScore2 = function ( type, notes ) {
	var id = notes.split( /\s+/ ).shift();
	var output = ScaleGenerator.applyTemplate( notes );

	output = output + "\n" + THE_TEXT + "\n";

	this.nextOutputFilename( type + '-' + id );
	ScaleGenerator.writeFile( this.currentOutputFilename(), output );

	this.writeIncludeText( '\\noindent $\\vcenter{ \\hbox{ \\includegraphics[width=1.0 \\textwidth]{' + this.currentOutputFilenameAsPDF() + '}}}$\n' );
};

var OUTPUT_PATH = 'out/'
function batch() {
	var c = new ScaleGenerator( OUTPUT_PATH, 'basic' );
	c.writeHeader1( "Natural" );
	c.writeScore2( "example", "do  do  re mi fa sol la ti do" );
	c.writeHeader1( "Flat" );
	c.writeScore2( "example", "do  de  ra me fe se  le te de" );

	// c.writeScore2( "diatonic", "do  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeHeader1( "Sharp" );
	// c.writeScore2( "diatonic", "sol do' re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "re  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "la  do' re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "mi  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "ti  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "fi  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeHeader1( "Flat" );
	// c.writeScore2( "diatonic", "fa  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "te  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "me  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "le  do' re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "re  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "se  do' re mi fa sol la ti do | do ti la sol fa mi re do" );

	// c.writeHeader1( "Special ( Flat )" );
	// c.writeScore2( "diatonic", "de  do' re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "fe  do' re mi fa sol la ti do | do ti la sol fa mi re do" );

	// c.writeHeader1( "Special ( Sharp )" );
	// c.writeScore2( "diatonic", "di  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "si  do' re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "ri  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "li  do' re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "ma  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	// c.writeScore2( "diatonic", "ta  do  re mi fa sol la ti do | do ti la sol fa mi re do" );
	c.close();
}

batch();




// vim: filetype=javascript :

