#!/usr/bin/nodejs

var ch = require( 'chromatic' );
var ScaleGenerator = require( 'scale-generator' );
var OUTPUT_PATH = 'out/'
var c = new ScaleGenerator( OUTPUT_PATH /*, 'scales-exercise' */ );

c.writeHeader0( "Exercise to Acquire the Senses of Tonality" );


function exec( id, keys, scale, pattern , title, comment ) {
	if ( title ) {
		c.writeHeader2( title );
	}
	if ( comment ) {
		c.writeTextBody( title );
	}
	for ( var i of keys ) {
		c.writeHeader3( 'Key ' + ita2ger[ i ] );
		c.writeScore( id + '_' + i, `@${i}(${scale}) ${ pattern }` );
	}
}

var keys = "do,fa,te,me,le,ra,se,sol,re,la,mi,ti,fi".split( ',' );
var ita2ger = {
	'do' : 'C',
	'fa' : 'F',
	'te' : 'B\\flat',
	'me' : 'E\\flat',
	'le' : 'A\\flat',
	'ra' : 'D\\flat',
	'se' : 'G\\flat',
	'sol': 'G',
	're' : 'D',
	'la' : 'A',
	'mi' : 'E',
	'ti' : 'B',
	'fi' : 'F\\sharp',
};

var scale_dorian      = "do,re,me,fa,sol,la,te";
var scale_diminished  = "do,re,me,fa,se,le,la,ti";
var scale_melodic     = "do,re,me,fa,sol,la,ti";
var scale_harmonic    = "do,re,me,fa,sol,le,ti";
var scale_melodic_s11 = "do,re,me,fi,sol,la,ti";

var scale_wholetone = "do,re,mi,fi,si,li";
var scale_augument = "do,me,mi,sol,le,ti";
var scale_augument_ma7 = "do,re,me,mi,se,sol,le,te,ti";
var scale_augument_n13 = "do,re,me,mi,se,le,la,te";

var pattern6_01 = "1&8 [ 3 5 7 ] s  2, [ 4 6 8 ] s 3, [ 5 7 9 ] s 4, [ 6 8 10 ] s  5, [ 7 9 11 ] s 6, [ 8 10 12 ] s 7, [ 9 11 13 ] "
var pattern7_01 = "1&8 [ 3 5 7 ] s  2, [ 4 6 8 ] s 3, [ 5 7 9 ] s 4, [ 6 8 10 ] s  5, [ 7 9 11 ] s 6, [ 8 10 12 ] s 7, [ 9 11 13 ] s 8, [ 10 12 14 ]"
var pattern8_01 = "1&8 [ 3 5 7 ] s  2, [ 4 6 8 ] s 3, [ 5 7 9 ] s 4, [ 6 8 10 ] s  5, [ 7 9 11 ] s 6, [ 8 10 12 ] s 7, [ 9 11 13 ] s 8, [ 10 12 14 ] s 9, [ 11 13 15 ]"
var pattern9_01 = "1&8 [ 3 5 7 ] s  2, [ 4 6 8 ] s 3, [ 5 7 9 ] s 4, [ 6 8 10 ] s  5, [ 7 9 11 ] s 6, [ 8 10 12 ] s 7, [ 9 11 13 ] s 8, [ 10 12 14 ] s 9, [ 11 13 15 ] s 10, [ 12 14 16 ]"

pattern6_01 = pattern6_01.replace( /s/g , "" );
pattern7_01 = pattern7_01.replace( /s/g , "" );
pattern8_01 = pattern8_01.replace( /s/g , "" );
pattern9_01 = pattern9_01.replace( /s/g , "" );

// 1
// exec( "dor_br1", keys, scale_dorian,  pattern7_01, "Dorian - Broken Chord Movement 1", "" );


// var pattern7_02 = "1 7   2 1   3 2   4 3   5 4   6 5   7 6   8 7    9 8  10 9 \n 8 9 7 8 6 7 5 6 4 5 3 4 2 3 1 2 7 1";
// exec( keys, scale_dorian,       pattern7_02, "dor_2nd",     "Dorian - Interval 2nd ", "" );

exec( "dor_3rd_lh",  keys, scale_dorian, "1 3   2 4   3 5   4 6   5 7   6 8   7 9   8 10  \n 8 10 7 9 6 8 5 7 4 6 3 5 2 4 1 3",
		 "Dorian - Interval 3rd - Low High", "" );

exec( "dor_3rd_hl", keys, scale_dorian, "3 1    4 2    5 3    6 4    7 5    8 6    9 7  10 8 \n 10 8 9 7 8 6  7 5  6 4  5 3  4 2  3 1", 
		"Dorian - Interval 3rd - High Low", "" );

// exec( "dor_4th", keys, scale_dorian,  "1 4   2 5   3 6   4 7   5 8   6 9   7 10   8 11  9 12 \n 11 8 10 7 9 6 8 5 7 4 6 3 5 2 4 1",
// 		"Dorian - Interval 4th ", "" );
// 
// exec( "dor_5th", keys, scale_dorian,  "1 5' 2 6' 3 7' 4 8' 5 9' 6 10' 7 11' 8 12' 9 13' \n 12 8, 11 7, 10 6, 9 5, 8 4, 7 3, 6 2, 5 1,",
// 		"Dorian - Interval 5th ", "" );
// 
// exec( "dor_6th", keys, scale_dorian,  "3 1' 4, 2' 5, 3' 6, 4' 7, 5' 1, 6' 2, 7' 3, 1'",
// 		"Dorian - Interval 6th ", "" );







// 
// exec( keys, scale_melodic ,     pattern7_01, "mel",     "Melodic Minor - Broken Chord Movement 1", "" );
// exec( keys, scale_harmonic,     pattern7_01, "har",     "Harmonic Minor - Broken Chord Movement 1", "" );
// exec( keys, scale_melodic_s11 , pattern7_01, "mel_s11", "Melodic Minor \\sharp 11 - Broken Chord Movement 1", "" );
// 
// 
// 
// 
// 
// exec( keys, scale_diminished,   pattern8_01, "dim",     "Diminished - Broken Chord Movement 1", "" );
// exec( keys, scale_wholetone ,   pattern6_01, "who",     "Melodic Minor \\sharp 11 - Broken Chord Movement 1", "" );
// exec( keys, scale_augument ,    pattern6_01, "aug",     "Melodic Minor \\sharp 11 - Broken Chord Movement 1", "" );
// exec( keys, scale_augument_ma7, pattern9_01, "aug_ma7", "Melodic Minor \\sharp 11 - Broken Chord Movement 1", "" );
// exec( keys, scale_augument_n13, pattern8_01, "aug_n13", "Melodic Minor \\sharp 11 - Broken Chord Movement 1", "" );
// 
c.close();

// vim: filetype=javascript :

