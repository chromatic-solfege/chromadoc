#!/usr/bin/nodejs

var ch = require( 'chromatic' );
var ScaleGenerator = require( 'scale-generator' );

ScaleGenerator.prototype.writeScore1 = function ( type, notes ) {
	var id = notes.split( /\s+/ ).shift();
	var output = ScaleGenerator.applyTemplate( notes );

	this.nextOutputFilename( type + '-' + id );
	ScaleGenerator.writeFile( this.currentOutputFilename(), output );

	this.writeIncludeText( '\\noindent ' );
	this.writeIncludeText(  ch.note2alphabet_tex( id ) ) ;
	this.writeIncludeText( '$\\vcenter{ \\hbox{ \\includegraphics[width=1.0 \\textwidth]{' + this.currentOutputFilenameAsPDF() + '}}}$\n' );
};

var OUTPUT_PATH = 'out/'
function batch() {
	var c = new ScaleGenerator( OUTPUT_PATH, 'dorian' );
	c.writeHeader1( "Scales" );
	c.writeHeader1( "Dorian Scales" );
	c.writeScore(  "do@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore( "sol@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "re@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "le@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "mi@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "ti@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "fi@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "fa@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "te@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "me@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "le@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "ra@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.writeScore(  "se@(do,re,me,fa,sol,la,te)  < 1 3 5 7 >  < 2 4 6 8 > < 3 5 7 9 > < 4 6 8 10 > < 5 7 9 11 > < 6 8 10 12 > < 7 9 11 13 > < 8 10 12 14 >" );
	c.close();
}

batch();




// vim: filetype=javascript :

